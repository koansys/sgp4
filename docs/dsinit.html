<!DOCTYPE html>

<html>
<head>
  <title>dsinit.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="angl.html">
                angl.js
              </a>
            
              
              <a class="source" href="constants.html">
                constants.js
              </a>
            
              
              <a class="source" href="days2mdh.html">
                days2mdh.js
              </a>
            
              
              <a class="source" href="dpper.html">
                dpper.js
              </a>
            
              
              <a class="source" href="dscom.html">
                dscom.js
              </a>
            
              
              <a class="source" href="dsinit.html">
                dsinit.js
              </a>
            
              
              <a class="source" href="dspace.html">
                dspace.js
              </a>
            
              
              <a class="source" href="getgravc.html">
                getgravc.js
              </a>
            
              
              <a class="source" href="jday.html">
                jday.js
              </a>
            
              
              <a class="source" href="mag.html">
                mag.js
              </a>
            
              
              <a class="source" href="mutils.html">
                mutils.js
              </a>
            
              
              <a class="source" href="newtonnu.html">
                newtonnu.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>dsinit.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-pi">"use strict"</span>;


define([<span class="hljs-string">"getgravc"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(getgravc)</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="function-dsinit">function dsinit</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>This procedure provides deep space contributions to mean motion dot due
    to geopotential resonance with half day and one day orbits.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(
</span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="inputs">inputs</h2>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <pre><code>Cosim, Sinim-
Emsq        - Eccentricity squared
Argpo       - Argument of Perigee
S1, S2, S3, S4, S5      -
Ss1, Ss2, Ss3, Ss4, Ss5 -
Sz1, Sz3, Sz11, Sz13, Sz21, Sz23, Sz31, Sz33 -
T           - Time
Tc          -
GSTo        - Greenwich sidereal time                   rad
Mo          - Mean Anomaly
MDot        - Mean Anomaly dot (rate)
No          - Mean Motion
nodeo       - right ascension of ascending node
nodeDot     - right ascension of ascending node dot (rate)
XPIDOT      -
Z1, Z3, Z11, Z13, Z21, Z23, Z31, Z33 -
Eccm        - Eccentricity
Argpm       - Argument of perigee
Inclm       - Inclination
Mm          - Mean Anomaly
Xn          - Mean Motion
nodem       - right ascension of ascending node
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>        cosim,  emsq,   argpo,  s1,     s2,     s3,     s4,
        s5,     sinim,  ss1,    ss2,    ss3,    ss4,    ss5,
        sz1,    sz3,    sz11,   sz13,   sz21,   sz23,   sz31,
        sz33,   t,      tc,     gsto,   mo,     mdot,   no,
        nodeo, nodedot,       xpidot, z1,     z3,     z11,
        z13,    z21,    z23,    z31,    z33,    em,     argpm,
        inclm,  mm,     nm,     nodem, ecco,   eccsq) {</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="local-variables">local variables</h2>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <pre><code>ainv2       -
aonv        -
cosisq      -
eoc         -
f220, f221, f311, f321, f322, f330, f441, f442, f522, f523, f542, f543  -
g200, g201, g211, g300, g310, g322, g410, g422, g520, g521, g532, g533  -
sini2       -
temp        -
temp1       -
theta       -
xno2        -
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> twopi = <span class="hljs-number">2.0</span> * <span class="hljs-built_in">Math</span>.PI,
        aonv  = <span class="hljs-number">0.0</span>,
        q22    = <span class="hljs-number">1.7891679e-6</span>,
        q31    = <span class="hljs-number">2.1460748e-6</span>,
        q33    = <span class="hljs-number">2.2123015e-7</span>,
        root22 = <span class="hljs-number">1.7891679e-6</span>,
        root44 = <span class="hljs-number">7.3636953e-9</span>,
        root54 = <span class="hljs-number">2.1765803e-9</span>,
        rptim  = <span class="hljs-number">4.37526908801129966e-3</span>,
        root32 = <span class="hljs-number">3.7393792e-7</span>,
        root52 = <span class="hljs-number">1.1428639e-7</span>,
        x2o3   = <span class="hljs-number">2.0</span> / <span class="hljs-number">3.0</span>,
        znl    = <span class="hljs-number">1.5835218e-4</span>,
        zns    = <span class="hljs-number">1.19459e-5</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>sgp4fix identify constants and allow alternate values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        irez = <span class="hljs-number">0</span>,
        c = getgravc(<span class="hljs-number">84</span>), <span class="hljs-comment">// TODO: what constants here?</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>TODO: FIGURE OUT HOW TO NOT NEED TO GET GLOBALS
<code>tumin, mu, radiusearthkm, xke, j2, j3, j4, j3oj2,</code></p>
<h2 id="deep-space-initialization">deep space initialization</h2>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        d2201 = <span class="hljs-number">0</span>,
        d2211 = <span class="hljs-number">0</span>,
        d3210 = <span class="hljs-number">0</span>,
        d3222 = <span class="hljs-number">0</span>,
        d4410 = <span class="hljs-number">0</span>,
        d4422 = <span class="hljs-number">0</span>,
        d5220 = <span class="hljs-number">0</span>,
        d5232 = <span class="hljs-number">0</span>,
        d5421 = <span class="hljs-number">0</span>,
        d5433 = <span class="hljs-number">0</span>,
        del1  = <span class="hljs-number">0</span>,
        del2  = <span class="hljs-number">0</span>,
        del3  = <span class="hljs-number">0</span>,
        atime = <span class="hljs-number">0</span>,
        xfact = <span class="hljs-number">0</span>,
        xlamo = <span class="hljs-number">0</span>,
        xli   = <span class="hljs-number">0</span>,
        xni   = <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>variable defined later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        ses, sis, sls, sghs, shs, sgs, sghl,
        dedt, didt, dmdt, shll, domdt, dnodt, dndt, theta,
        cosisq, emo, emsqo, eoc,
        g201, g211, g310, g322, g410, g422, g520, g533, g521, g532,
        sini2, f220, f221, f321, f322, f441, f442, f522, f523, f542, f543,
        xno2, ainv2, temp1, temp,
        g200, g300, f311, f330;

        <span class="hljs-keyword">if</span> ((nm &lt; <span class="hljs-number">0.0052359877</span>) &amp;&amp; (nm &gt; <span class="hljs-number">0.0034906585</span>)) {
            irez = <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">if</span> ((nm &gt;= <span class="hljs-number">8.26e-3</span>) &amp;&amp; (nm &lt;= <span class="hljs-number">9.24e-3</span>) &amp;&amp; (em &gt;= <span class="hljs-number">0.5</span>)) {
            irez = <span class="hljs-number">2</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="do-solar-terms">do solar terms</h2>

            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        ses  =  ss1 * zns * ss5;
        sis  =  ss2 * zns * (sz11 + sz13);
        sls  = -zns * ss3 * (sz1 + sz3 - <span class="hljs-number">14.0</span> - <span class="hljs-number">6.0</span> * emsq);
        sghs =  ss4 * zns * (sz31 + sz33 - <span class="hljs-number">6.0</span>);
        shs  = -zns * ss2 * (sz21 + sz23);</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>  // sgp4fix for 180 deg incl</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ((inclm &lt; <span class="hljs-number">5.2359877e-2</span>) || (inclm &gt; <span class="hljs-built_in">Math</span>.PI - <span class="hljs-number">5.2359877e-2</span>)) {
            shs = <span class="hljs-number">0.0</span>;
        }
        <span class="hljs-keyword">if</span> (sinim !== <span class="hljs-number">0.0</span>) {         <span class="hljs-comment">// WARN unreliable floating point comparison</span>
            shs = shs / sinim;
        }
        sgs  = sghs - cosim * shs;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="do-lunar-terms">do lunar terms</h2>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        dedt = ses + s1 * znl * s5;
        didt = sis + s2 * znl * (z11 + z13);
        dmdt = sls - znl * s3 * (z1 + z3 - <span class="hljs-number">14.0</span> - <span class="hljs-number">6.0</span> * emsq);
        sghl = s4 * znl * (z31 + z33 - <span class="hljs-number">6.0</span>);
        shll = -znl * s2 * (z21 + z23);</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>  // sgp4fix for 180 deg incl</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ((inclm &lt; <span class="hljs-number">5.2359877e-2</span>) || (inclm &gt; <span class="hljs-built_in">Math</span>.PI - <span class="hljs-number">5.2359877e-2</span>)) {
            shll = <span class="hljs-number">0.0</span>;
        }
        domdt = sgs + sghl;
        dnodt = shs;
        <span class="hljs-keyword">if</span> (sinim !== <span class="hljs-number">0.0</span>) {        <span class="hljs-comment">// WARN unrealiable</span>
            domdt = domdt - cosim / sinim * shll;
            dnodt = dnodt + shll / sinim;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h2 id="calculate-deep-space-resonance-effects">calculate deep space resonance effects</h2>

            </div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        dndt   = <span class="hljs-number">0.0</span>;
        theta  = (gsto + tc * rptim) % twopi;
        em     = em + dedt * t;
        inclm  = inclm + didt * t;
        argpm  = argpm + domdt * t;
        nodem  = nodem + dnodt * t;
        mm     = mm + dmdt * t;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>//   sgp4fix for negative inclinations
//   the following if statement should be commented out
//if (inclm &lt; 0.0)
//  {
//    inclm  = -inclm;
//    argpm  = argpm - pi;
//    nodem = nodem + pi;
//  }</p>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>update resonances : numerical (euler-maclaurin) integration</p>

            </div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h2 id="epoch-restart">epoch restart</h2>

            </div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>sgp4fix for propagator problems
the following integration works for negative time steps and periods
the specific changes are unknown because the original code was so convoluted</p>

            </div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h2 id="initialize-the-resonance-terms">initialize the resonance terms</h2>

            </div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (irez !== <span class="hljs-number">0</span>) {
            aonv = <span class="hljs-built_in">Math</span>.pow(nm / c.xke, x2o3); <span class="hljs-comment">// TODO GLOBAL xke</span></pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h2 id="geopotential-resonance-for-12-hour-orbits">geopotential resonance for 12 hour orbits</h2>

            </div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (irez === <span class="hljs-number">2</span>) {
                cosisq = cosim * cosim;
                emo    = em;
                em     = ecco;
                emsqo  = emsq;
                emsq   = eccsq;
                eoc    = em * emsq;
                g201   = -<span class="hljs-number">0.306</span> - (em - <span class="hljs-number">0.64</span>) * <span class="hljs-number">0.440</span>;

                <span class="hljs-keyword">if</span> (em &lt;= <span class="hljs-number">0.65</span>) {
                    g211 =    <span class="hljs-number">3.616</span>  -  <span class="hljs-number">13.2470</span> * em +  <span class="hljs-number">16.2900</span> * emsq;
                    g310 =  -<span class="hljs-number">19.302</span>  + <span class="hljs-number">117.3900</span> * em - <span class="hljs-number">228.4190</span> * emsq +  <span class="hljs-number">156.5910</span> * eoc;
                    g322 =  -<span class="hljs-number">18.9068</span> + <span class="hljs-number">109.7927</span> * em - <span class="hljs-number">214.6334</span> * emsq +  <span class="hljs-number">146.5816</span> * eoc;
                    g410 =  -<span class="hljs-number">41.122</span>  + <span class="hljs-number">242.6940</span> * em - <span class="hljs-number">471.0940</span> * emsq +  <span class="hljs-number">313.9530</span> * eoc;
                    g422 = -<span class="hljs-number">146.407</span>  + <span class="hljs-number">841.8800</span> * em - <span class="hljs-number">1629.014</span> * emsq + <span class="hljs-number">1083.4350</span> * eoc;
                    g520 = -<span class="hljs-number">532.114</span>  + <span class="hljs-number">3017.977</span> * em - <span class="hljs-number">5740.032</span> * emsq + <span class="hljs-number">3708.2760</span> * eoc;
                }
                <span class="hljs-keyword">else</span> {
                    g211 =   -<span class="hljs-number">72.099</span> +   <span class="hljs-number">331.819</span> * em -   <span class="hljs-number">508.738</span> * emsq +   <span class="hljs-number">266.724</span> * eoc;
                    g310 =  -<span class="hljs-number">346.844</span> +  <span class="hljs-number">1582.851</span> * em -  <span class="hljs-number">2415.925</span> * emsq +  <span class="hljs-number">1246.113</span> * eoc;
                    g322 =  -<span class="hljs-number">342.585</span> +  <span class="hljs-number">1554.908</span> * em -  <span class="hljs-number">2366.899</span> * emsq +  <span class="hljs-number">1215.972</span> * eoc;
                    g410 = -<span class="hljs-number">1052.797</span> +  <span class="hljs-number">4758.686</span> * em -  <span class="hljs-number">7193.992</span> * emsq +  <span class="hljs-number">3651.957</span> * eoc;
                    g422 = -<span class="hljs-number">3581.690</span> + <span class="hljs-number">16178.110</span> * em - <span class="hljs-number">24462.770</span> * emsq + <span class="hljs-number">12422.520</span> * eoc;
                    <span class="hljs-keyword">if</span> (em &gt; <span class="hljs-number">0.715</span>) {
                        g520 = -<span class="hljs-number">5149.66</span> + <span class="hljs-number">29936.92</span> * em - <span class="hljs-number">54087.36</span> * emsq + <span class="hljs-number">31324.56</span> * eoc;
                    }
                    <span class="hljs-keyword">else</span> {
                        g520 =  <span class="hljs-number">1464.74</span> -  <span class="hljs-number">4664.75</span> * em +  <span class="hljs-number">3763.64</span> * emsq;
                    }
                }
                <span class="hljs-keyword">if</span> (em &lt; <span class="hljs-number">0.7</span>) {
                    g533 = -<span class="hljs-number">919.22770</span> + <span class="hljs-number">4988.6100</span> * em - <span class="hljs-number">9064.7700</span> * emsq + <span class="hljs-number">5542.21</span>  * eoc;
                    g521 = -<span class="hljs-number">822.71072</span> + <span class="hljs-number">4568.6173</span> * em - <span class="hljs-number">8491.4146</span> * emsq + <span class="hljs-number">5337.524</span> * eoc;
                    g532 = -<span class="hljs-number">853.66600</span> + <span class="hljs-number">4690.2500</span> * em - <span class="hljs-number">8624.7700</span> * emsq + <span class="hljs-number">5341.4</span>  * eoc;
                }
                <span class="hljs-keyword">else</span> {
                    g533 = -<span class="hljs-number">37995.780</span> + <span class="hljs-number">161616.52</span> * em - <span class="hljs-number">229838.20</span> * emsq + <span class="hljs-number">109377.94</span> * eoc;
                    g521 = -<span class="hljs-number">51752.104</span> + <span class="hljs-number">218913.95</span> * em - <span class="hljs-number">309468.16</span> * emsq + <span class="hljs-number">146349.42</span> * eoc;
                    g532 = -<span class="hljs-number">40023.880</span> + <span class="hljs-number">170470.89</span> * em - <span class="hljs-number">242699.48</span> * emsq + <span class="hljs-number">115605.82</span> * eoc;
                }

                sini2 =  sinim * sinim;
                f220 =  <span class="hljs-number">0.75</span> * (<span class="hljs-number">1.0</span> + <span class="hljs-number">2.0</span> * cosim + cosisq);
                f221 =  <span class="hljs-number">1.5</span> * sini2;
                f321 =  <span class="hljs-number">1.875</span> * sinim  *  (<span class="hljs-number">1.0</span> - <span class="hljs-number">2.0</span> * cosim - <span class="hljs-number">3.0</span> * cosisq);
                f322 = -<span class="hljs-number">1.875</span> * sinim  *  (<span class="hljs-number">1.0</span> + <span class="hljs-number">2.0</span> * cosim - <span class="hljs-number">3.0</span> * cosisq);
                f441 = <span class="hljs-number">35.0</span> * sini2 * f220;
                f442 = <span class="hljs-number">39.3750</span> * sini2 * sini2;
                f522 =  <span class="hljs-number">9.84375</span> * sinim * (sini2 * (<span class="hljs-number">1.0</span> - <span class="hljs-number">2.0</span> * cosim - <span class="hljs-number">5.0</span> * cosisq) +
                   <span class="hljs-number">0.33333333</span> * (-<span class="hljs-number">2.0</span> + <span class="hljs-number">4.0</span> * cosim + <span class="hljs-number">6.0</span> * cosisq));
                f523 = sinim * (<span class="hljs-number">4.92187512</span> * sini2 * (-<span class="hljs-number">2.0</span> - <span class="hljs-number">4.0</span> * cosim +
                  <span class="hljs-number">10.0</span> * cosisq) + <span class="hljs-number">6.56250012</span> * (<span class="hljs-number">1.0</span> + <span class="hljs-number">2.0</span> * cosim - <span class="hljs-number">3.0</span> * cosisq));
                f542 = <span class="hljs-number">29.53125</span> * sinim * (<span class="hljs-number">2.0</span> - <span class="hljs-number">8.0</span> * cosim + cosisq *
                   (-<span class="hljs-number">12.0</span> + <span class="hljs-number">8.0</span> * cosim + <span class="hljs-number">10.0</span> * cosisq));
                f543 = <span class="hljs-number">29.53125</span> * sinim * (-<span class="hljs-number">2.0</span> - <span class="hljs-number">8.0</span> * cosim + cosisq *
                   (<span class="hljs-number">12.0</span> + <span class="hljs-number">8.0</span> * cosim - <span class="hljs-number">10.0</span> * cosisq));
                xno2  =  nm * nm;
                ainv2 =  aonv * aonv;
                temp1 =  <span class="hljs-number">3.0</span> * xno2 * ainv2;
                temp  =  temp1 * root22;
                d2201 =  temp * f220 * g201;
                d2211 =  temp * f221 * g211;
                temp1 =  temp1 * aonv;
                temp  =  temp1 * root32;
                d3210 =  temp * f321 * g310;
                d3222 =  temp * f322 * g322;
                temp1 =  temp1 * aonv;
                temp  =  <span class="hljs-number">2.0</span> * temp1 * root44;
                d4410 =  temp * f441 * g410;
                d4422 =  temp * f442 * g422;
                temp1 =  temp1 * aonv;
                temp  =  temp1 * root52;
                d5220 =  temp * f522 * g520;
                d5232 =  temp * f523 * g532;
                temp  =  <span class="hljs-number">2.0</span> * temp1 * root54;
                d5421 =  temp * f542 * g521;
                d5433 =  temp * f543 * g533;
                xlamo =  (mo + nodeo + nodeo - theta - theta) % twopi;
                xfact =  mdot + dmdt + <span class="hljs-number">2.0</span> * (nodedot + dnodt - rptim) - no;
                em    = emo;
                emsq  = emsqo;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h2 id="synchronous-resonance-terms">synchronous resonance terms</h2>

            </div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (irez === <span class="hljs-number">1</span>) {
                g200  = <span class="hljs-number">1.0</span> + emsq * (-<span class="hljs-number">2.5</span> + <span class="hljs-number">0.8125</span> * emsq);
                g310  = <span class="hljs-number">1.0</span> + <span class="hljs-number">2.0</span> * emsq;
                g300  = <span class="hljs-number">1.0</span> + emsq * (-<span class="hljs-number">6.0</span> + <span class="hljs-number">6.60937</span> * emsq);
                f220  = <span class="hljs-number">0.75</span> * (<span class="hljs-number">1.0</span> + cosim) * (<span class="hljs-number">1.0</span> + cosim);
                f311  = <span class="hljs-number">0.9375</span> * sinim * sinim * (<span class="hljs-number">1.0</span> + <span class="hljs-number">3.0</span> * cosim) - <span class="hljs-number">0.75</span> * (<span class="hljs-number">1.0</span> + cosim);
                f330  = <span class="hljs-number">1.0</span> + cosim;
                f330  = <span class="hljs-number">1.875</span> * f330 * f330 * f330;
                del1  = <span class="hljs-number">3.0</span> * nm * nm * aonv * aonv;
                del2  = <span class="hljs-number">2.0</span> * del1 * f220 * g200 * q22;
                del3  = <span class="hljs-number">3.0</span> * del1 * f330 * g300 * q33 * aonv;
                del1  = del1 * f311 * g310 * q31 * aonv;
                xlamo = (mo + nodeo + argpo - theta) % twopi;
                xfact = mdot + xpidot - rptim + dmdt + domdt + dnodt - no;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h2 id="for-sgp4-initialize-the-integrator">for sgp4, initialize the integrator</h2>

            </div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            xli   = xlamo;
            xni   = no;
            atime = <span class="hljs-number">0.0</span>;
            nm    = no + dndt;

        }
        <span class="hljs-keyword">return</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h2 id="outputs">outputs</h2>

            </div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p><code>dsinit</code> return an object wiht the following properties.</p>
<pre><code>em          - eccentricity
argpm       - argument of perigee
inclm       - inclination
mm          - mean anomaly
nm          - mean motion
nodem       - right ascension of ascending node
irez        - flag <span class="hljs-keyword">for</span> resonance           <span class="hljs-number">0</span>-none, <span class="hljs-number">1</span>-one day, <span class="hljs-number">2</span>-half day
atime       -
d2201, d2211, d3210, d3222, d4410, d4422, d5220, d5232, d5421, d5433    -
dedt        -
didt        -
dmdt        -
dndt        -
dnodt       -
domdt       -
del1, del2, del3        -
Ses  , Sghl , Sghs , Sgs  , Shl  , Shs  , Sis  , Sls
theta       -
xfact       -
xlamo       -
xli         -
xni
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>
                em: em,
                argpm:  argpm,
                inclm:  inclm,
                mm:     mm,
                nm:     nm,
                nodem:  nodem,
                irez:   irez,
                atime:  atime,
                d2201:  d2201,
                d2211:  d2211,
                d3210:  d3210,
                d3222:  d3222,
                d4410:  d4410,
                d4422:  d4422,
                d5220:  d5220,
                d5232:  d5232,
                d5421:  d5421,
                d5433:  d5433,
                dedt:   dedt,
                didt:   didt,
                dmdt:   dmdt,
                dndt:   dndt,
                dnodt:  dnodt,
                domdt:  domdt,
                del1:   del1,
                del2:   del2,
                del3:   del3,
                xfact:  xfact,
                xlamo:  xlamo,
                xli:    xli,
                xni:    xni
            };

        };
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
